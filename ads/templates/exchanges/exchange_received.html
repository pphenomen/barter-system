<h1>Полученные предложения</h1>

{% for p in proposals %}
    <div style="border:1px solid #ccc; padding:10px; margin:10px;">
        <p><strong>От пользователя:</strong> {{ p.ad_sender.user.username }}</p>
        <p><strong>Предложение:</strong> {{ p.ad_sender.title }}</p>
        <p><strong>К вашему объявлению:</strong> {{ p.ad_receiver.title }}</p>
        <p><strong>Комментарий:</strong> {{ p.comment }}</p>
        <p><strong>Статус:</strong> {{ p.status }}</p>

        {% if p.status == 'Ожидает' %}
            <form method="post" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="proposal_id" value="{{ p.id }}">
                <button type="submit" name="action" value="Принята">Принять</button>
                <button type="submit" name="action" value="Отклонена">Отклонить</button>
            </form>
        {% endif %}
    </div>
{% empty %}
    <p>Пока нет полученных предложений.</p>
{% endfor %}

{% if is_paginated %}
    <div style="margin-top: 20px;">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">Назад</a>
        {% endif %}

        <span style="margin: 0 10px;">Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Вперёд</a>
        {% endif %}
    </div>
{% endif %}

<a href="{% url 'ad_list' %}">Назад к объявлениям</a>
